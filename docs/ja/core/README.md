Super Leopard core パッケージ
==============================

帳票のテンプレートの各要素を定義するモデルを提供します。
このライブラリは、基本的には json で定義されたレポート (テンプレート) に対して、データを与えることで帳票を印刷します。
その基礎となるレポートの書式や基本的な動作を定義しているのがこの core ライブラリです。
Web や PDF 以外に出力する帳票が必要になった場合は、core ライブラリを使用して作成することができます。

レポート
--------

レポートには、ページとレイヤーが含まれます。

- `page`: ページオブジェクト
- `layers`: レイヤーオブジェクトの配列

ページ
------

ページを定義するオブジェクトです。

- `size`: ページのサイズです。サイズ名もしくはサイズオブジェクトを指定します。
- `orientation`: 用紙の方向を指定します。
  - `'landscape'`: 横向き
  - `'portrait'`: 縦向き
- `unit`: レポートで使用する単位を指定します。
  - `'mm'`: ミリメートル
  - `'in'`: インチ
  - `'pt'`: ポイント
- `margin`: 余白を指定します。
  - `left`: 左側の余白
  - `top`: 上側の余白

unit で指定した単位がレポート全体で使用されますが、文字のサイズと線幅についてはポイントが使われます。

レイヤー
---------

レイヤーは、一つのレポートに複数配置できます。

- `name`: レイヤー名
- `shapes`: 描画オブジェクトの配列


Shape (描画オブジェクト)
----------------

Shape (描画オブジェクト) は、内部的に TypeScript の class として定義されていますが、プレーンなオブジェクトから生成できます。レポートの定義はプレーンなオブジェクトとして保存されることになるので、ここではシリアライズされたプレーンなオブジェクトについて説明します。

### Circle

円を描画するオブジェクトを定義します。

- `type`: `'circle'`
- `x`: 左上の X 座標
- `y`: 左上の Y 座標
- `diameter`: 円の直径
- `fillColor`: 塗りつぶし色
- `border`: 枠線 (Border オブジェクト)

### Ellipse

楕円を描画するオブジェクトを定義します。

- `type`: `'ellipse'`
- `x`: 左上の X 座標
- `y`: 左上の Y 座標
- `width`: 幅
- `height`: 高さ
- `fillColor`: 塗りつぶし色
- `border`: 枠線 (Border オブジェクト)

### Line

直線を描画するオブジェクトを定義します。

- `type`: `'line'`
- `x1`: 始点の X 座標
- `y1`: 始点の Y 座標
- `x2`: 終点の X 座標
- `y2`: 終点の Y 座標
- `border`: 枠線 (Border オブジェクト)

### Rect

矩形を描画するオブジェクトを定義します。

- `type`: `'rect'`
- `x`: 左上の X 座標
- `y`: 左上の Y 座標
- `width`: 幅
- `height`: 高さ
- `fillColor`: 塗りつぶし色
- `border`: 枠線 (Border オブジェクト)

### Text

テキストを描画するオブジェクトを定義します。

- `type`: `'text'`
- `x`: 左上の X 座標
- `y`: 左上の Y 座標
- `width`: 領域の幅
- `height`: 領域の高さ
- `text`: 表示するテキスト
- `align`: テキストの水平方向の揃え方
  - `'left'`: 左寄せ
  - `'center'`: 中央寄せ
  - `'right'`: 右寄せ
  - `'justify'`: 両端寄せ
  - `'justify-all'`: 均等割付
- `valign`: テキストの垂直方向の揃え方
- `multiLine`: 複数行のテキスト
- `linePitch`: 行間 (multilineがtrueの場合のみ有効)
- `fitCell`: 領域に合わせてフォントサイズを調整
- `font`: フォント
  - `family`: フォント名
  - `size`: フォントサイズ (point)
  - `style`: フォントスタイル (次の文字列をカンマ区切りで指定)
    - `'italic'`: 斜体
    - `'bold'`: 太字
    - `'underline'`: 下線
    - `'strike'`: 削除線
- `color`: 文字色
- `fillColor`: 背景色 (領域を塗りつぶす)

### Image

画像を描画するオブジェクトを定義します。

- `type`: `'image'`
- `x`: 左上の X 座標
- `y`: 左上の Y 座標
- `width`: 画像の幅
- `height`: 画像の高さ
- `src`: 画像の名前

`src` から実際の画像を表示させるための処理はアプリケーションが行う必要があります。

### Barcode

バーコードを描画するオブジェクトを定義します。

- `type`: `'barcode'`
- `x`: 左上の X 座標
- `y`: 左上の Y 座標
- `width`: バーコードの幅
- `height`: バーコードの高さ
- `format`: バーコードの形式
  - `'code39'`: Code 39
  - `'code128'`: Code 128
  - `'jan'`: JAN
  - `'ean13'`: EAN-13
  - `'ean8'`: EAN-8
  - `'ean5'`: EAN-5
  - `'gs1_128'`: GS1-128
  - `'isbn'`: ISBN
  - `'itf'`: ITF
  - `'itf14'`: ITF-14
  - `'upca'`: UPC-A
  - `'upce'`: UPC-E
  - `'codabar'`: CODABAR
  - `'nw7'`: NW7
  - `'qr'`: QR Code
- `value`: バーコードの値
- `options`: バーコードのオプション
  - `includeText`: バーコードにテキストを含める
  - `rotate`: バーコードを回転させる (N: 0, R:90, I:180, L:270)

### Border

枠線を定義するオブジェクトです。

- `style`: 枠線のスタイル
  - `'solid'`: 実線
  - `'dashed'`: 破線
  - `'dotted'`: 点線
- `width`: 枠線の太さ (ポイント)
- `color`: 枠線の色

### 色

すべて、`#` で始まる 6桁の Hex 色コードを指定します。

フィールド
----------

レポート上に可変データを印字させるためのオブジェクトです。
印刷時に、与えられたデータが印字されます。
フィールドが描画する Shape は、前記の Shape のどれでも可能です。
テキストの場合は、value に渡した値が印字されます。
バーコードの場合は、その値をバーコードで印字します。
その他のオブジェクトの場合は、value が `true` の場合に指定された Shape が描画され、`false` の場合には印刷されません。

- `type`: `'field'`
- `name`: フィールド名
- `shape`: 表示するオブジェクト

グループ
---------

複数の Shape をまとめてグループとして扱えます。
グループは単にまとめるだけでなく、メンバーを繰り返して印刷することができます。

- `type`: `'group'`
- `shapes`: Shape の配列
- `repeatCount`: 繰り返し回数
- `direction`: 繰り返す方向
  - `'horizontal'`
  - `'vertical'`
- `width`: 幅 (指定しなければ、shapes の幅になります)
- `height`: 高さ (指定しなければ、shapes の高さになります)

`width` / `height` は繰り返すときのサイズとして使われます。

リスト
-------

レポートは通常は、1ページに1レコードの印刷を行いますが、1ページに複数のレコードを印刷したい場合は、このリストを使います
リストは、レポートの中に1つだけ存在することができます。

- `type`: `'list'`
- `shapes`: Shape の配列
- `columns`: 横方向に繰り返す回数
- `rows`: 縦方向に繰り返す回数
- `width`: 幅 (指定しなければ、shapes の幅になります)
- `height`: 高さ (指定しなければ、shapes の高さになります)
- `direction`: 最初に繰り返す方向

例えば `rows=10`, `columns=2` と指定した場合、2列で10行のリストを作成します。
`direction` が `'vertical'` ならば、最初に縦方向に繰り返し、次に横方向に繰り返します。
